{"version":3,"sources":["webpack:///./src/screens/my/Password.vue","webpack:///./src/screens/my/Password.vue?dc8c","webpack:///./src/screens/my/Password.vue?235b"],"names":["my_Password","Group","Cell","XButton","XInput","Spinner","name","data","errorMsg","loading","password","prev_password","repeat_password","new_password","inputErrors","changed","confirmPasswordValidator","valid","methods","validateErrors","this","$refs","oldPassword","firstError","push","newPassword","$set","validateAll","validate","forceShowError","passwordValidator","value","validatePassword","msg","submit","_this","changeUserInfo","$store","state","user","id","then","response","setTimeout","dispatch","$router","msgFormatter","components","screens_my_Password","render","_vm","_h","$createElement","_c","_self","attrs","label-width","staticClass","_l","error","index","key","_v","_s","_e","ref","autocapitalize","title","show-clear","required","type","on","on-blur","model","callback","$$v","expression","max","is-type","on-change","class","nativeOn","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"mobile/static/js/12.c2e5be0905de6e967331.js","sourcesContent":["\nimport Group from 'vux/src/components/group/index.vue'\nimport Cell from 'vux/src/components/cell/index.vue'\nimport XButton from 'vux/src/components/x-button/index.vue'\nimport XInput from 'vux/src/components/x-input/index.vue'\nimport Spinner from 'vux/src/components/spinner/index.vue'\n\nimport { changeUserInfo } from '../../api'\nimport { msgFormatter, validatePassword } from '../../utils'\n\nexport default {\nname: 'changepassword',\ndata () {\nreturn {\nerrorMsg: '',\nloading: false,\npassword: {\nprev_password: '',\nrepeat_password: '',\nnew_password: ''\n},\ninputErrors: [],\nchanged: false,\nconfirmPasswordValidator: {\nvalid: true\n}\n}\n},\nmethods: {\nvalidateErrors () {\nconst inputErrors = []\nif (this.$refs.oldPassword.firstError) {\ninputErrors.push('请輸入当前密码')\n}\nif (this.$refs.newPassword.firstError) {\nif (this.$refs.newPassword.firstError === '必填哦') {\ninputErrors.push('请输入新密码')\n} else {\ninputErrors.push(this.$refs.newPassword.firstError)\n}\n}\nthis.$set(this.confirmPasswordValidator, 'valid', !(this.password.repeat_password !== this.password.new_password))\nif (!this.confirmPasswordValidator.valid) {\ninputErrors.push('确认输入密码不一致')\n}\nthis.inputErrors = inputErrors\n},\nvalidateAll () {\nlet newPassword = this.$refs.newPassword\nlet oldPassword = this.$refs.oldPassword\nnewPassword.validate()\noldPassword.validate()\nif (newPassword.firstError) {\nnewPassword.forceShowError = true\n}\nif (oldPassword.firstError) {\noldPassword.forceShowError = true\n}\nthis.validateErrors()\nreturn newPassword.valid && oldPassword.valid && this.confirmPasswordValidator.valid\n},\npasswordValidator (value) {\nif (!validatePassword(value)) {\nreturn {\nvalid: false,\nmsg: '请输入6~15位数字或字母'\n}\n} else {\nreturn {\nvalid: true\n}\n}\n},\nsubmit () {\nif (this.loading) {\nreturn\n}\nthis.errorMsg = ''\nif (this.validateAll()) {\nthis.loading = true\nchangeUserInfo(this.$store.state.user.id, {password: this.password}).then((response) => {\nthis.changed = true\nsetTimeout(() => {\nthis.$store.dispatch('logout')\nthis.$router.push({name: 'Login'})\nthis.loading = false\n}, 2000)\n}, (response) => {\nthis.loading = false\nthis.errorMsg = msgFormatter(response)\n})\n}\n}\n},\ncomponents: {\nGroup,\nCell,\nXButton,\nXInput,\nSpinner\n}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/screens/my/Password.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('group',{attrs:{\"label-width\":\"'120px'\"}},[(_vm.inputErrors.length)?_c('div',[_c('ul',{staticClass:\"text-warning input-errors\"},_vm._l((_vm.inputErrors),function(error,index){return _c('li',{key:index},[_vm._v(_vm._s(error))])}),0)]):_vm._e(),_vm._v(\" \"),_c('x-input',{ref:\"oldPassword\",attrs:{\"autocapitalize\":\"off\",\"title\":\"当前密码\",\"show-clear\":true,\"required\":\"\",\"type\":\"password\"},on:{\"on-blur\":_vm.validateErrors},model:{value:(_vm.password.prev_password),callback:function ($$v) {_vm.$set(_vm.password, \"prev_password\", $$v)},expression:\"password.prev_password\"}}),_vm._v(\" \"),_c('x-input',{ref:\"newPassword\",attrs:{\"autocapitalize\":\"off\",\"title\":\"新密码\",\"show-clear\":true,\"required\":\"\",\"type\":\"password\",\"max\":15,\"is-type\":_vm.passwordValidator},on:{\"on-change\":_vm.validateErrors,\"on-blur\":_vm.validateErrors},model:{value:(_vm.password.new_password),callback:function ($$v) {_vm.$set(_vm.password, \"new_password\", $$v)},expression:\"password.new_password\"}}),_vm._v(\" \"),_c('x-input',{ref:\"confirmPassword\",class:!_vm.confirmPasswordValidator.valid?'weui-cell_warn':'',attrs:{\"autocapitalize\":\"off\",\"title\":\"确认新密码\",\"show-clear\":true,\"type\":\"password\",\"max\":15},on:{\"on-blur\":_vm.validateErrors,\"on-change\":_vm.validateErrors},model:{value:(_vm.password.repeat_password),callback:function ($$v) {_vm.$set(_vm.password, \"repeat_password\", $$v)},expression:\"password.repeat_password\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"text-center text-danger m-t\"},[_vm._v(_vm._s(_vm.errorMsg))]),_vm._v(\" \"),(_vm.changed)?_c('div',{staticClass:\"text-center text-success m-t\"},[_vm._v(\"密码已重置\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"m-a\"},[_c('x-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.submit($event)}}},[(_vm.loading)?_c('spinner',{staticClass:\"vux-spinner-inverse\",attrs:{\"type\":'spiral'}}):_c('span',[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4b1bd001\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/screens/my/Password.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b1bd001\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vux-loader/src/after-less-loader.js!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Password.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Password.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Password.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b1bd001\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Password.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/screens/my/Password.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}