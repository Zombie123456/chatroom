webpackJsonp([12],{ByIU:function(r,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=a("rHil"),e=a("1DHf"),o=a("2sLL"),i=a("pDNl"),n=a("jOlP"),d=a("gyMJ"),l=a("0xDb"),p=(t.a,e.a,o.a,i.a,n.a,{name:"changepassword",data:function(){return{errorMsg:"",loading:!1,password:{prev_password:"",repeat_password:"",new_password:""},inputErrors:[],changed:!1,confirmPasswordValidator:{valid:!0}}},methods:{validateErrors:function(){var r=[];this.$refs.oldPassword.firstError&&r.push("请輸入当前密码"),this.$refs.newPassword.firstError&&("必填哦"===this.$refs.newPassword.firstError?r.push("请输入新密码"):r.push(this.$refs.newPassword.firstError)),this.$set(this.confirmPasswordValidator,"valid",!(this.password.repeat_password!==this.password.new_password)),this.confirmPasswordValidator.valid||r.push("确认输入密码不一致"),this.inputErrors=r},validateAll:function(){var r=this.$refs.newPassword,s=this.$refs.oldPassword;return r.validate(),s.validate(),r.firstError&&(r.forceShowError=!0),s.firstError&&(s.forceShowError=!0),this.validateErrors(),r.valid&&s.valid&&this.confirmPasswordValidator.valid},passwordValidator:function(r){return Object(l.c)(r)?{valid:!0}:{valid:!1,msg:"请输入6~15位数字或字母"}},submit:function(){var r=this;this.loading||(this.errorMsg="",this.validateAll()&&(this.loading=!0,Object(d.a)(this.$store.state.user.id,{password:this.password}).then(function(s){r.changed=!0,setTimeout(function(){r.$store.dispatch("logout"),r.$router.push({name:"Login"}),r.loading=!1},2e3)},function(s){r.loading=!1,r.errorMsg=Object(l.a)(s)})))}},components:{Group:t.a,Cell:e.a,XButton:o.a,XInput:i.a,Spinner:n.a}}),c={render:function(){var r=this,s=r.$createElement,a=r._self._c||s;return a("div",[a("group",{attrs:{"label-width":"'120px'"}},[r.inputErrors.length?a("div",[a("ul",{staticClass:"text-warning input-errors"},r._l(r.inputErrors,function(s,t){return a("li",{key:t},[r._v(r._s(s))])}),0)]):r._e(),r._v(" "),a("x-input",{ref:"oldPassword",attrs:{autocapitalize:"off",title:"当前密码","show-clear":!0,required:"",type:"password"},on:{"on-blur":r.validateErrors},model:{value:r.password.prev_password,callback:function(s){r.$set(r.password,"prev_password",s)},expression:"password.prev_password"}}),r._v(" "),a("x-input",{ref:"newPassword",attrs:{autocapitalize:"off",title:"新密码","show-clear":!0,required:"",type:"password",max:15,"is-type":r.passwordValidator},on:{"on-change":r.validateErrors,"on-blur":r.validateErrors},model:{value:r.password.new_password,callback:function(s){r.$set(r.password,"new_password",s)},expression:"password.new_password"}}),r._v(" "),a("x-input",{ref:"confirmPassword",class:r.confirmPasswordValidator.valid?"":"weui-cell_warn",attrs:{autocapitalize:"off",title:"确认新密码","show-clear":!0,type:"password",max:15},on:{"on-blur":r.validateErrors,"on-change":r.validateErrors},model:{value:r.password.repeat_password,callback:function(s){r.$set(r.password,"repeat_password",s)},expression:"password.repeat_password"}})],1),r._v(" "),a("div",{staticClass:"text-center text-danger m-t"},[r._v(r._s(r.errorMsg))]),r._v(" "),r.changed?a("div",{staticClass:"text-center text-success m-t"},[r._v("密码已重置")]):r._e(),r._v(" "),a("div",{staticClass:"m-a"},[a("x-button",{attrs:{type:"primary"},nativeOn:{click:function(s){return r.submit(s)}}},[r.loading?a("spinner",{staticClass:"vux-spinner-inverse",attrs:{type:"spiral"}}):a("span",[r._v("提交")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(p,c,!1,function(r){a("Zkbl")},null,null);s.default=u.exports},Zkbl:function(r,s){}});
//# sourceMappingURL=12.c2e5be0905de6e967331.js.map