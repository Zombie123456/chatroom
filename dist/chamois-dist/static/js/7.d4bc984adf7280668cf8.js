webpackJsonp([7],{"7OeO":function(t,a){},AXNp:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"box"},[e("table",{staticClass:"table table-striped b-t v-m",attrs:{"st-table":"rowCollectionBasic"}},[e("thead",[e("tr",[e("th",{staticClass:"align-middle",attrs:{width:"25%"}},[t._v("\n            "+t._s(t.$t("setting.param")+t.$t("common.name"))+"\n          ")]),t._v(" "),e("th",{staticClass:"v-m"},[t._v("\n            "+t._s(t.$t("setting.param")+t.$t("common.value"))+"\n          ")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"10%"}},[t._v("\n            "+t._s(t.$t("common.operate"))+"\n          ")])])]),t._v(" "),t.pageLoading?t._e():e("tbody",t._l(t.settingList,function(a,s){return e("tr",{key:s,staticClass:"align-middle"},[e("td",{staticClass:"align-middle"},[t._v("\n            "+t._s(a.display_name)+"\n          ")]),t._v(" "),e("td",[0===a.type?e("span",[t._v(t._s(a.value))]):1===a.type?e("img",{staticStyle:{height:"120px"},attrs:{src:a.value}}):2===a.type?e("span",{staticClass:"label m-r",class:a.value?"success":"danger"},[t._v(t._s(a.value?t.$t("status.active"):t.$t("status.inactive"))+"\n            ")]):t._e(),t._v(" "),2===a.type?e("label",{staticClass:"md-switch m-r m-t-xs"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"element.value"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.value)?t._i(a.value,null)>-1:a.value},on:{change:[function(e){var s=a.value,i=e.target,n=!!i.checked;if(Array.isArray(s)){var l=t._i(s,null);i.checked?l<0&&t.$set(a,"value",s.concat([null])):l>-1&&t.$set(a,"value",s.slice(0,l).concat(s.slice(l+1)))}else t.$set(a,"value",n)},function(e){return t.updateChatroomSetting(s,a)}]}}),t._v(" "),e("i",{staticClass:"success"})]):t._e()]),t._v(" "),e("td",{staticClass:"align-middle text-center"},[2!==a.type?e("button",{staticClass:"btn btn-xs btn-icon blue",on:{click:function(e){t.openModal(s,Object.assign(a,{displayName:a.display_name}))}}},[e("i",{staticClass:"fa fa-edit"})]):t._e()])])}),0)]),t._v(" "),t.pageLoading?e("div",{staticClass:"row"},[e("div",{staticClass:"text-center m-a"},[e("i",{staticClass:"fa fa-spin fa-spinner"}),t._v(" "),e("b",[t._v(t._s(t.$t("common.loading")))])])]):t._e(),t._v(" "),t.pageLoading||t.settingList.length?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"text-center m-a"},[e("span",[t._v(t._s(t.$t("common.no_data")))])])])]),t._v(" "),t.modal.showModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-backdrop fade in",on:{click:function(a){t.modal.showModal=!1}}}),t._v(" "),e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("action.update"))+" - "+t._s(t.modal.displayName))])]),t._v(" "),e("div",{staticClass:"modal-body p-lg"},[e("form",{staticClass:"m-l m-r",on:{submit:function(a){return a.preventDefault(),t.updateChatroomSetting(t.modal.index,{key:t.modal.key,value:1===t.modal.type?t.modal.resultValue:t.modal.value,type:t.modal.type})}}},[1===t.modal.type?e("div",{staticClass:"text-center p-l p-r"},[e("label",{staticClass:"form-control-label p-b-0"},[t._v(t._s(t.$t("setting.param")+t.$t("common.value"))+"\n              ")]),t._v(" "),e("div",[e("label",{staticClass:"hover-show-container text-center"},[t.modal.hasImg?e("img",{attrs:{src:t.modal.value}}):e("div",{staticClass:"noSetting"},[e("span",[t._v(t._s(t.$t("action.no_setting")))])]),t._v(" "),t._m(0),t._v(" "),e("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:function(a){return t.syncImg(a)}}}),t._v(" "),e("div",{staticClass:"imgNav"},[t.modal.hasImg?e("button",{staticClass:"btn btn-xs btn-icon",attrs:{type:"button"},on:{click:function(a){return t.clearImg()}}},[e("i",{staticClass:"fa fa-times"})]):t._e()])])])]):0===t.modal.type?e("div",[e("label",{staticClass:"form-control-label p-b-0",class:{"text-blue":t.modal.value}},[t._v(t._s(t.$t("setting.param")+t.$t("common.value"))+"\n              ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.modal.value,expression:"modal.value",modifiers:{trim:!0}}],ref:"modalContent",staticClass:"form-control",attrs:{spellcheck:"false"},domProps:{value:t.modal.value},on:{input:function(a){a.target.composing||t.$set(t.modal,"value",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.modal.errorMsg,expression:"modal.errorMsg"}],staticClass:"m-l-sm text-danger"},[t._v(t._s(t.modal.errorMsg))])]):t._e()])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn dark-white p-x-md w-xs",attrs:{type:"button"},on:{click:function(a){t.modal.showModal=!1}}},[t._v("\n            "+t._s(t.$t("action.cancel"))+"\n          ")]),t._v(" "),e("button",{staticClass:"btn blue p-x-md w-xs",attrs:{type:"button"},on:{click:function(a){return t.updateChatroomSetting(t.modal.index,{key:t.modal.key,value:1===t.modal.type?t.modal.resultValue:t.modal.value,hasImg:1===t.modal.type?t.modal.hasImg:"",type:t.modal.type})}}},[t.modal.loading?e("span",[e("i",{staticClass:"fa fa-spin fa-spinner"})]):e("span",[t._v(t._s(t.$t("action.confirm")))])])])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"overlay"},[a("i",{staticClass:"fa fa-cloud-upload"})])}]}},KjUG:function(t,a,e){e("7OeO");var s=e("VU/8")(e("kTGp"),e("AXNp"),"data-v-f168528a",null);t.exports=s.exports},kTGp:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("woOf"),i=e.n(s),n=e("n5Qe"),l=e("oFuF");a.default={data:function(){return{pageLoading:!0,settingList:[],modal:{showModal:!1,index:"",key:"",display_name:"",value:"",hasImg:!1,type:"",loading:!1}}},created:function(){this.getChatroomSetting()},methods:{getChatroomSetting:function(){var t=this;this.$http.get(n.a.chatroomSetting).then(function(a){a.filter(function(t){return 2===t.type}).forEach(function(t){t.value=parseInt(t.value)}),t.settingList=a,t.pageLoading=!1})},syncImg:function(t){var a=this,e=t.target.files[0];if(e){var s=new FileReader;s.onload=function(t){a.modal.value=t.target.result},s.readAsDataURL(e),this.modal.resultValue=e,this.modal.hasImg=!0}},clearImg:function(){this.modal.hasImg=!1},openModal:function(t,a){var e=this,s=a.displayName,n=void 0===s?"":s,l=a.key,o=void 0===l?"":l,d=a.value,c=void 0===d?"":d,r=a.type,m=void 0===r?0:r;this.modal=i()(this.modal,{showModal:!0,displayName:n,key:o,value:c,type:m,index:t,errorMsg:"",loading:!1}),1===m&&(this.$set(this.modal,"resultValue",""),this.modal.hasImg=!!c),m||this.$nextTick(function(){e.$refs.modalContent.focus(),e.$refs.modalContent.select()})},updateChatroomSetting:function(t,a){var e=this,s=a.key,i=void 0===s?"":s,l=a.value,o=void 0===l?"":l,d=a.type,c=void 0===d?"":d,r=a.hasImg,m=void 0===r?"":r;this.modal.loading=!0;var u=new window.FormData;1===c?u.append("value",m?o:""):2===c?u.append("value",o?"1":"0"):u.append("value",o),this.$http.patch(""+n.a.chatroomSetting+i+"/",u).then(function(a){e.modal.loading=!1,e.notify("update"),e.settingList[t]=a,e.modal.showModal=!1},function(t){e.modal.loading=!1,e.modal.errorMsg=""+e.$t("action.update")+e.$t("status.failed")+" ("+t+")"})},notify:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";l.a.notify({message:this.$t("action."+t)+this.$t("status."+e)+(s&&" ("+s+")"),type:a})}}}}});
//# sourceMappingURL=7.d4bc984adf7280668cf8.js.map